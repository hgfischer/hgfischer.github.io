<!DOCTYPE html> <html class=no-js lang=en-US prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#"> <head> <title>Manage multiple GOPATH dirs with ease :: Memory Leak by Herbert Fischer</title> <meta http-equiv=X-UA-Compatible content="IE=edge"> <meta name=author content="Herbert Fischer"> <meta name=HandheldFriendly content=True> <meta name=MobileOptimized content=320> <meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"> <meta name=description content="How to use bash to manage multiple GOPATHs"> <meta name=keywords content=golang,gopath,linux,shell,bash,> <meta property=og:type content=article> <meta property=article:published_time content=2015-02-05> <meta property=article:modified_time content=2015-02-05> <meta property=article:tag content=golang><meta property=article:tag content=gopath><meta property=article:tag content=linux><meta property=article:tag content=shell><meta property=article:tag content=bash> <meta property=og:site_name content="Memory Leak"> <meta property=og:title content="Manage multiple GOPATH dirs with ease"> <meta property=og:description content="How to use bash to manage multiple GOPATHs"> <meta property=og:url content=http://hgfischer.org/article/managing-multiple-gopaths/ > <meta property=og:locale content=pt_BR> <meta property=og:locale:alternate content=en_US> <meta name=twitter:card content=summary> <meta name=twitter:site content=@hgfischer> <meta name=twitter:title content="Manage multiple GOPATH dirs with ease"> <meta name=twitter:creator content=@hgfischer> <meta name=twitter:description content="How to use bash to manage multiple GOPATHs"> <meta name=twitter:domain content=hgfischer.org> <link rel=canonical href=http://hgfischer.org/article/managing-multiple-gopaths/ > <link rel=stylesheet href=/css/styles.min.css?1469990910927965715> <link rel=stylesheet href=/css/theme.min.css?1469990910927985883> <link href="//fonts.googleapis.com/css?family=Vollkorn|Open+Sans" rel=stylesheet type=text/css> <link rel="shortcut icon" href=/favicon.ico?1469990910928013515 type=image/x-icon> <link rel=apple-touch-icon href=/apple-touch-icon.png?1469990910928030868> <link rel=prefetch href=/fonts/glyphicons-halflings-regular.woff> <link rel=prerender href=/fonts/glyphicons-halflings-regular.woff> </head> <body> <script> window.fbAsyncInit = function() { FB.init({ appId: '303471599851367', xfbml: true, version: 'v2.2' }); };
	(function(d, s, id){ var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) {return;}
	js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/en_US/sdk.js";
	fjs.parentNode.insertBefore(js, fjs); }(document, 'script', 'facebook-jssdk')); </script> <nav class="navbar navbar-inverse navbar-static-top" role=navigation> <div class=container> <div class=navbar-header> <button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=#bs-navbar-collapse> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href=/ >Memory Leak</a> </div> <div class="collapse navbar-collapse" id=bs-navbar-collapse> <ul class="nav navbar-nav"> <li><a href=/artigo/ title="Artigos em português">Português</a></li> <li><a href=/article/ title="English articles">English</a></li> <li><a href=/project>Projects</a></li> <li><a href=/tags/ >Tags</a></li> </ul> <form class="navbar-form navbar-right" role=search target=_blank action=https://www.google.com/search> <div class=form-group> <div class=input-group> <input type=hidden name=sitesearch value=hgfischer.org> <input name=q class=form-control placeholder=Search...> <span class=input-group-btn> <button type=submit class="btn btn-default"> <span class="glyphicon glyphicon-search"></span> </button> </span> </div> </div> </form> </div> </div> </nav> <meta itemprop=wordCount content=390> <meta itemprop=datePublished content=2015-02-05> <meta itemprop=url content=http://hgfischer.org/article/managing-multiple-gopaths/ > <meta itemprop=copyrightHolder content="Herbert G. Fischer"> <meta itemprop=copyrightYear content=2015> <div class=container itemscope itemtype=http://schema.org/Article> <div class=page-header> <h1 itemprop=name id=title>Manage multiple GOPATH dirs with ease</h1> </div> <div class=row> <div class=col-sm-8> <div class=row> <div class=col-sm-6> <small> Thu Feb 5, 2015, 400 words, read in about 2 mins. </small> </div> <div class="col-sm-6 text-right"> <span class="label label-default">golang</span> <span class="label label-default">gopath</span> <span class="label label-default">linux</span> <span class="label label-default">shell</span> <span class="label label-default">bash</span> </div> </div> <hr> <p itemprop=articleBody class=text-justify> <p>Usually I have only one GOPATH in my machine and thats most Gophers out there recommend. However, sometimes we just need to work on different projects with different versions of the same dependency, and it is out of question to update them. We just don&rsquo;t want to break something that is working, or mess with it.</p> <p>The quick solution is to point GOPATH to somewhere else, but everytime we have to swap the project we are working on, we need to change it again.</p> <p>So I just came up with a simple solution that works on command line shell with Bash, and can be adapted to other shells. Since I am a vim user, this should work well. I do not recommend this method for Sublime Text users or just any other IDE that uses its own method for setting GOPATH. It will not work unless you load the Editor/IDE from the same command line shell and it do not have its own way to setup GOPATH.</p> <p>The solution is simple. Just include the following snippet in your <code>~/.bashrc</code> (or <code>~/.bash_profile</code>) and reload your shell environment with <code>source ~/.bashrc</code>. This snippet will create a shell function that will override the builtin command <code>cd</code> with a customized one that scans the entered directory, and every other above, for a file named <code>.gopath</code>.</p> <pre><code>cd () {
    builtin cd &quot;$@&quot;
    cdir=$PWD
    while [ &quot;$cdir&quot; != &quot;/&quot; ]; do
        if [ -e &quot;$cdir/.gopath&quot; ]; then
            export GOPATH=$cdir
            break
        fi
        cdir=$(dirname &quot;$cdir&quot;)
    done
}
</code></pre> <p>Now you just need to create a <code>.gopath</code> file in every directory you want as your GOPATH and every time you enter this directory, the redefined <code>cd</code> function will set the GOPATH of your current environment to this directory.</p> <p>For example, let us create two directories, <code>A</code> and <code>B</code>, both with a subdirectory <code>src</code> to fully illustrate the solution.</p> <pre><code>$ go env GOPATH
/home/user/Go

$ mkdir -p ~/A/src &amp;&amp; touch ~/A/.gopath
$ mkdir -p ~/B/src &amp;&amp; touch ~/B/.gopath

$ cd ~/A/src
$ go env GOPATH
/home/user/A

$ cd ~/B/src
$ go env GOPATH
/home/user/B
</code></pre> <p>Ok, but now I want my old GOPATH back again&hellip;</p> <pre><code>$ cd /home/user/Go
$ go env GOPATH
/home/user/B
</code></pre> <p>Oops&hellip; We just need to touch .gopath here!!</p> <pre><code>$ touch /home/user/Go/.gopath
$ cd .
$ go env GOPATH
/home/user/Go
</code></pre> <p>That&rsquo;s it! Simple GOPATH management without external dependencies (eg. direnv)!</p> <p></p> <hr> <div class=row> <div class=col-sm-12> <span itemprop=author>Herbert Fischer</span> is a programmer with more than 18 years of experience in different sub areas of the internet and software industry. He is a open-source contributor and author of a few projects at <a href=http://github.com/hgfischer target=_blank>Github</a>. You can also find him on <a href=http://twitter.com/hgfischer target=_blank>Twitter</a>, <a rel=author href=https://plus.google.com/+HerbertFischer/ target=_blank>Google+</a> and <a href=http://www.linkedin.com/in/hgfischer target=_blank>LinkedIn</a>. </div> </div> <hr> <div class=row> <div class=col-sm-12> <nav> <ul class=pager> <li class="next small"> <a class=next href=/artigo/linux-notebook-samsung/ > Linux e Notebooks Samsung&nbsp;<span aria-hidden=true>&rarr;</span> </a> </li> </ul> </nav> </div> </div> <div class=row> <div class=col-sm-12> <aside id=comments> <div><h2> Comments </h2></div> <div id=disqus_thread></div> <script type=text/javascript> var disqus_shortname = 'hgfischer';
    var disqus_identifier = 'http:\/\/hgfischer.org\/article\/managing-multiple-gopaths\/';
    var disqus_title = 'Manage multiple GOPATH dirs with ease';
    var disqus_url = 'http:\/\/hgfischer.org\/article\/managing-multiple-gopaths\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })(); </script> <noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript> <a href=http://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a> </aside> </div> </div> </div> <div class="col-sm-3 col-sm-offset-1"> <div> <h4>Share</h4> <ul class=list-group> <li class=list-group-item> <a href="https://twitter.com/intent/tweet?status=Manage%20multiple%20GOPATH%20dirs%20with%20ease: http%3a%2f%2fhgfischer.org%2farticle%2fmanaging-multiple-gopaths%2f" target=_blank class=twitter><span class="icon icon-twitter"></span>Twitter</a> </li> <li class=list-group-item> <a href="http://www.reddit.com/submit?url=http%3a%2f%2fhgfischer.org%2farticle%2fmanaging-multiple-gopaths%2f" target=_blank title=Reddit class=reddit><span class="icon icon-reddit"></span>Reddit</a> </li> <li class=list-group-item> <a href="http://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fhgfischer.org%2farticle%2fmanaging-multiple-gopaths%2f&title=Manage%20multiple%20GOPATH%20dirs%20with%20ease&source=hgfischer" target=_blank title=LinkedIn class=linkedin><span class="icon icon-linkedin"></span>LinkedIn</a> </li> <li class=list-group-item> <div class=g-plusone data-annotation=none></div> </li> <li class=list-group-item> <div id=fb-root></div> <div class=fb-like data-href=http://hgfischer.org/article/managing-multiple-gopaths/ data-layout=button data-action=like data-show-faces=true data-share=true></div> </li> </ul> </div> <div> <h4>Follow</h4> <ul class=list-group> <li class=list-group-item> <a href=http://feeds.feedburner.com/hgfischer target=_blank title="Subscribe by RSS" class=rss><span class="icon icon-feed-2"></span>RSS</a> </li> <li class=list-group-item> <a href=http://github.com/hgfischer target=_blank title=GitHub class=github><span class="icon icon-github"></span>GitHub</a> </li> <li class=list-group-item> <a href=http://www.twitter.com/hgfischer target=_blank title="Follow me on Twitter" class=twitter><span class="icon icon-twitter"></span>Twitter</a> </li> <li class=list-group-item> <a href=http://www.linkedin.com/in/hgfischer target=_blank title=LinkedIn class=linkedin><span class="icon icon-linkedin"></span>LinkedIn</a> </li> <li class=list-group-item> <div class=g-person data-width=230 data-href=//plus.google.com/u/0/112773714892088929211 data-rel=author></div> </li> </ul> </div> </div> </div> </div> <nav class=navbar role=footer> <div class=container> <p class="navbar-text small"> &copy; 1997-2016 <span itemprop=author itemscope itemtype=http://schema.org/Person> <span itemprop=name>Herbert G. Fischer</span>. </span> <a href=http://creativecommons.org/licenses/by/3.0/ title="Creative Commons Attribution">Some rights reserved</a>; please attribute properly and link back. </p> </div> </nav> <script async defer src=https://apis.google.com/js/platform.js></script> <script defer src=/js/jquery-1.11.1.min.js></script> <script defer src=/js/bootstrap-3.3.1.min.js></script> <script> (function(i,s,o,g,r,a,m) {
i['GoogleAnalyticsObject'] = r;
i[r] = i[r] || function() { (i[r].q = i[r].q || []).push(arguments) }, i[r].l = 1 * new Date();
a = s.createElement(o), m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m);
})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
ga('create', 'UA-57003414-1', 'auto');
ga('send', 'pageview'); </script> <script> (function() { 'use strict'; if (navigator.userAgent.match(/IEMobile\/10\.0/)) {
var msViewportStyle = document.createElement('style');
msViewportStyle.appendChild(document.createTextNode('@-ms-viewport{width:auto!important}'));
document.querySelector('head').appendChild(msViewportStyle);
}})(); </script> 